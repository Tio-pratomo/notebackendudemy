---
title: "Routing dan HTTP Methods"
---

Routing adalah mekanisme yang menentukan bagaimana aplikasi merespons permintaan client ke endpoint tertentu dengan HTTP method spesifik. Ini adalah fondasi dari setiap aplikasi web yang memungkinkan server memahami apa yang diminta user dan memberikan respons yang tepat.

## Struktur Dasar Routing

Setiap route di Express mengikuti struktur berikut:

```javascript
app.METHOD(PATH, HANDLER)
```

Dimana:
- **app** - instance dari Express
- **METHOD** - HTTP method dalam lowercase (get, post, put, delete)
- **PATH** - path/endpoint di server
- **HANDLER** - callback function yang dieksekusi saat route cocok

## HTTP Methods Deep Dive

### GET Method

GET digunakan untuk **mengambil data** dari server tanpa mengubah apapun. Method ini adalah yang paling umum digunakan dan aman untuk di-bookmark atau di-cache.

```javascript
import express from 'express';
const app = express();

// GET request ke homepage
app.get('/', (req, res) => {
    res.send('GET request ke halaman utama');
});

// GET request dengan path spesifik
app.get('/products', (req, res) => {
    res.send('Daftar semua produk');
});

// GET request untuk resource spesifik
app.get('/products/123', (req, res) => {
    res.send('Detail produk dengan ID 123');
});
```

### POST Method

POST digunakan untuk **mengirim data baru** ke server, seperti saat submit form atau membuat resource baru.

```javascript
// POST request untuk membuat user baru
app.post('/daftar', (req, res) => {
    // Data dari form ada di req.body
    const { nama, email, password } = req.body;
    res.send(`User ${nama} berhasil terdaftar!`);
});

// POST request untuk login
app.post('/login', (req, res) => {
    const { email, password } = req.body;
    // Proses autentikasi
    res.send('Login berhasil!');
});
```

**Penting**: Untuk membaca `req.body`, perlu middleware parser yang akan dibahas di sesi berikutnya.

### PUT Method

PUT digunakan untuk **mengganti seluruh resource** yang sudah ada. Jika ada satu field yang tidak dikirim, field tersebut akan hilang atau menjadi null.

```javascript
// PUT request untuk update seluruh data user
app.put('/pengguna/:id', (req, res) => {
    const userId = req.params.id;
    const { nama, email, password, alamat, telepon } = req.body;
    
    // Semua field harus disertakan
    res.send(`Seluruh data pengguna ${userId} telah diganti`);
});
```

Analogi: Seperti mengganti seluruh sepeda rusak dengan sepeda baru, bukan hanya memperbaiki bagian yang rusak.

### PATCH Method

PATCH digunakan untuk **memperbarui sebagian kecil** dari resource. Hanya field yang dikirim saja yang akan diupdate.

```javascript
// PATCH request untuk update sebagian data
app.patch('/pengguna/:id', (req, res) => {
    const userId = req.params.id;
    const { emailBaru } = req.body;
    
    // Hanya email yang diupdate, field lain tetap
    res.send(`Email pengguna ${userId} diubah menjadi ${emailBaru}`);
});
```

Analogi: Seperti hanya mengganti ban sepeda yang kempes, tidak perlu mengganti seluruh sepeda.

### DELETE Method

DELETE digunakan untuk **menghapus resource** dari server.

```javascript
// DELETE request untuk menghapus user
app.delete('/pengguna/:id', (req, res) => {
    const userId = req.params.id;
    res.send(`Pengguna dengan ID ${userId} berhasil dihapus`);
});
```

## Route Parameters (Params)

Route parameters adalah bagian dinamis dari URL yang digunakan untuk **mengidentifikasi resource spesifik**. Parameters ditandai dengan titik dua (`:`) di path definition.

```javascript
// Single parameter
app.get('/pengguna/:id', (req, res) => {
    const userId = req.params.id;
    res.send(`Menampilkan data pengguna dengan ID: ${userId}`);
});

// Multiple parameters
app.get('/artikel/:kategori/:judul', (req, res) => {
    const { kategori, judul } = req.params;
    res.send(`Kategori: ${kategori}, Judul: ${judul}`);
});

// Nested parameters
app.get('/users/:userId/books/:bookId', (req, res) => {
    const { userId, bookId } = req.params;
    res.send(`User ${userId} membaca buku ${bookId}`);
});
```

**Akses**: 
- `/pengguna/123` → `req.params.id` = "123"
- `/artikel/teknologi/nodejs-tutorial` → `req.params.kategori` = "teknologi", `req.params.judul` = "nodejs-tutorial"
- `/users/42/books/567` → `req.params.userId` = "42", `req.params.bookId` = "567"

## Query Parameters (Query Strings)

Query parameters digunakan untuk **filtering, sorting, atau memberikan opsi tambahan**. Query dimulai dengan `?` dan dipisahkan dengan `&`.

```javascript
// Route dengan query parameters
app.get('/produk', (req, res) => {
    const { nama, harga_min, harga_max, kategori } = req.query;
    
    let responseMessage = 'Mencari produk';
    
    if (nama) {
        responseMessage += ` dengan nama: "${nama}"`;
    }
    if (harga_min) {
        responseMessage += `, harga minimum: ${harga_min}`;
    }
    if (harga_max) {
        responseMessage += `, harga maksimum: ${harga_max}`;
    }
    if (kategori) {
        responseMessage += `, kategori: ${kategori}`;
    }
    
    res.send(responseMessage);
});
```

**Akses**:
- `/produk?nama=laptop` → `req.query.nama` = "laptop"
- `/produk?harga_min=5000000&harga_max=10000000` → `req.query.harga_min` = "5000000", `req.query.harga_max` = "10000000"
- `/produk?kategori=elektronik&nama=keyboard` → multiple queries

## Perbedaan Params vs Query

**Route Parameters (`/user/:id`)**:
- Bagian dari path URL
- Bersifat required (wajib ada)
- Untuk identifikasi resource spesifik
- Contoh: `/users/123`, `/products/abc-123`

**Query Parameters (`/products?category=laptop`)**:
- Ditambahkan setelah `?` di URL
- Bersifat optional (opsional)
- Untuk filtering, sorting, pagination
- Contoh: `/products?category=laptop&sort=price&limit=10`

## HTTP Status Codes

Status code memberitahu client apakah request berhasil atau gagal:

### Status Codes Umum

**2xx - Success**
- 200 OK - Request berhasil
- 201 Created - Resource baru berhasil dibuat
- 204 No Content - Request berhasil tapi tidak ada content untuk dikirim

**3xx - Redirection**
- 301 Moved Permanently - Resource dipindah secara permanen
- 302 Found - Redirect sementara
- 304 Not Modified - Resource tidak berubah (cache masih valid)

**4xx - Client Error**
- 400 Bad Request - Request tidak valid
- 401 Unauthorized - Butuh autentikasi
- 403 Forbidden - Tidak punya izin akses
- 404 Not Found - Resource tidak ditemukan

**5xx - Server Error**
- 500 Internal Server Error - Error di server
- 502 Bad Gateway - Gateway error
- 503 Service Unavailable - Service sedang down

```javascript
// Menggunakan status codes
app.get('/api/user/:id', (req, res) => {
    const userId = req.params.id;
    
    // Simulasi pencarian user
    if (userId === '123') {
        res.status(200).json({ 
            id: 123, 
            name: 'John Doe' 
        });
    } else {
        res.status(404).json({ 
            error: 'User tidak ditemukan' 
        });
    }
});

app.post('/api/users', (req, res) => {
    const newUser = req.body;
    // Simulasi create user
    res.status(201).json({ 
        message: 'User berhasil dibuat',
        user: newUser 
    });
});
```

## Response Methods

Express menyediakan berbagai method untuk mengirim response:

```javascript
// res.send() - mengirim berbagai tipe response
app.get('/text', (req, res) => {
    res.send('Plain text response');
});

// res.json() - mengirim JSON response
app.get('/json', (req, res) => {
    res.json({ message: 'JSON response', data: [1, 2, 3] });
});

// res.status() - set status code
app.get('/not-found', (req, res) => {
    res.status(404).send('Halaman tidak ditemukan');
});

// Method chaining
app.get('/api/data', (req, res) => {
    res.status(200).json({ success: true, data: [] });
});
```

## Contoh Aplikasi Lengkap

Berikut contoh aplikasi yang menggunakan semua HTTP methods dan routing patterns:

```javascript
import express from 'express';

const app = express();
const port = 3000;

// Middleware untuk parsing JSON dan URL-encoded
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// GET - Halaman utama
app.get('/', (req, res) => {
    res.send('<h1>Welcome to Express App</h1>');
});

// GET - Daftar semua users
app.get('/users', (req, res) => {
    res.json([
        { id: 1, name: 'Alice' },
        { id: 2, name: 'Bob' }
    ]);
});

// GET - User spesifik dengan params
app.get('/users/:id', (req, res) => {
    const userId = req.params.id;
    res.json({ id: userId, name: 'User ' + userId });
});

// GET - Search dengan query parameters
app.get('/search', (req, res) => {
    const { q, category } = req.query;
    res.json({ 
        query: q, 
        category: category || 'all' 
    });
});

// POST - Create new user
app.post('/users', (req, res) => {
    const { name, email } = req.body;
    res.status(201).json({ 
        message: 'User created',
        user: { name, email }
    });
});

// PUT - Update seluruh user
app.put('/users/:id', (req, res) => {
    const userId = req.params.id;
    const userData = req.body;
    res.json({ 
        message: 'User updated completely',
        id: userId,
        data: userData
    });
});

// PATCH - Update sebagian user
app.patch('/users/:id', (req, res) => {
    const userId = req.params.id;
    const updates = req.body;
    res.json({ 
        message: 'User updated partially',
        id: userId,
        updates: updates
    });
});

// DELETE - Hapus user
app.delete('/users/:id', (req, res) => {
    const userId = req.params.id;
    res.json({ 
        message: 'User deleted',
        id: userId
    });
});

// 404 handler untuk route yang tidak ditemukan
app.use((req, res) => {
    res.status(404).send('404 - Route tidak ditemukan');
});

app.listen(port, () => {
    console.log(`Server running at http://localhost:${port}`);
});
```

## Testing Routes dengan Tools

Untuk testing routes, gunakan:
- **Browser** - untuk GET requests
- **Postman** - untuk semua HTTP methods
- **Thunder Client** (VS Code extension) - alternatif Postman di VS Code
- **curl** - command line tool

Contoh testing dengan curl:

```bash
# GET request
curl http://localhost:3000/users

# POST request
curl -X POST http://localhost:3000/users \
  -H "Content-Type: application/json" \
  -d '{"name":"Charlie","email":"charlie@example.com"}'

# PUT request
curl -X PUT http://localhost:3000/users/1 \
  -H "Content-Type: application/json" \
  -d '{"name":"Updated Name","email":"new@example.com"}'

# DELETE request
curl -X DELETE http://localhost:3000/users/1
```

***

**Ringkasan**: Sesi ini mengajarkan routing di Express dengan semua HTTP methods (GET, POST, PUT, PATCH, DELETE), perbedaan route parameters dan query parameters, penggunaan HTTP status codes yang tepat, dan berbagai response methods. Pemahaman routing yang solid adalah kunci untuk membangun REST API yang baik dan aplikasi web yang terstruktur.

